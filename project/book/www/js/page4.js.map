{"version":3,"sources":["page4.es6"],"names":[],"mappings":"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","file":"page4.js","sourcesContent":["\nvar PAGE4 = {\n\tfrom:\"\",\n\tasync init(from){\n\t\tthis.from = from;\n\t\tawait this.refresh();\n\t\tawait this.show();\n\t\tawait this.bindEvent();\n\t},\n\tasync search(){\n\t\tlet inputVal = await this.checkInput();\n\t\tlet data = await this.searchBQ(inputVal);\n\t\t\n\t\tthis.bindData(data);\n\t\tthis.cacheData(data);\n\t\tthis.bindListEvent();\n\n\t},\n\t//显示\n\tshow(){\n\t\tlet dom = $(\"#page4\"),\n\t\t\twin_width = window.innerWidth,\n\t\t\t_this = this;\n\n\t\treturn new Promise(function(success,error){\n\t\t\tdom.css3({\n\t\t\t\ttransform:\"translateX(\"+win_width+\"px)\",\n\t\t\t\tdisplay:\"box\"\n\t\t\t});\n\n\t\t\tdom.cssAnimate({\n\t\t\t\ttransform:\"translateX(0)\"\n\t\t\t},500,function(){\n\t\t\t\t$(\"#\"+_this.from).css({display:\"none\"});\n\t\t\t\tsuccess();\n\t\t\t})\n\t\t});\n\n\n\t},\n\t//隐藏\n\thide(){\n\t\tlet dom = $(\"#page4\"),\n\t\t\twin_width = window.innerWidth,\n\t\t\t_this = this;\n\n\t\treturn new Promise(function(success,error){\n\t\t\t$(\"#\"+_this.from).css3({display:\"box\"});\n\t\t\tdom.cssAnimate({\n\t\t\t\ttransform:\"translateX(\"+win_width+\"px)\"\n\t\t\t},500,function(){\n\t\t\t\tdom.css({display:\"none\"});\n\t\t\t\tsuccess();\n\t\t\t})\n\t\t});\n\t},\n\t//重载页面\n\trefresh(){\n\t\tlet back = $(\"#page4_back\"),\n\t\t\tinput = $(\"#page4_search\"),\n\t\t\tsearch = $(\"#page4_search_btn\"),\n\t\t\tbody = $(\"#page4_body\"),\n\t\t\tlist = body.find(\".page4_list\");\n\n\t\t$$(list).unbind(true);\n\t\t$$(back).unbind(true);\n\t\t$$(search).unbind(true);\n\t\tinput.val(\"\");\n\t\tbody.html(\"\");\n\n\t},\n\t//事件绑定\n\tbindEvent(){\n\t\tlet back = $(\"#page4_back\"),\n\t\t\tsearch = $(\"#page4_search_btn\"),\n\t\t\t_this = this;\n\n\t\t$$(back).myclickok(function(){\n\t\t\t_this.hide();\n\t\t});\n\n\t\t$$(search).myclickok(function(){\n\t\t\t_this.search().catch(function(msg){\n\t\t\t\tDEVICE.info.show(msg);\n\t\t\t});\n\t\t});\n\t},\n\t//检查输入框\n\tcheckInput(){\n\t\treturn new Promise(function(success,error){\n\t\t\tlet input_val = $.trim($(\"#page4_search\").val());\n\n\t\t\tif(input_val == \"\"){\n\t\t\t\terror(\"请输入要搜索的内容\");\n\t\t\t}else{\n\t\t\t\tsuccess(input_val);\n\t\t\t}\n\t\t})\n\t},\n\t//获取数据\n\tsearchBQ(val){\n\t\treturn new Promise(function(success,error){\n\t\t\tAJAX.go(\"./api/search\",{val:val},function(rs){\n\t\t\t\tif(rs && rs.name){\n\t\t\t\t\tsuccess(rs);\n\t\t\t\t}else{\n\t\t\t\t\terror(\"未找到该书籍\");\n\t\t\t\t}\n\t\t\t},error)\n\t\t})\n\t},\n\t//数据绑定\n\tbindData(data){\n\t\tlet body = $(\"#page4_body\"),\n\t\t\tlist = $(\"#page4_list\");\n\n\t\tlet oldList = body.find(\".page4_list\");\n\t\t$$(oldList).unbind(true);\n\t\tbody.html(\"\");\n\n\n\t\tlet this_list = list.clone().css({display:\"block\"}).attr({id:\"\"});\n\n\t\tthis_list.find(\".page4_list_name\").text(data.name);\n\t\tthis_list.data({url:data.url});\n\t\tthis_list.find(\".page4_list_worker\").text(data.worker);\n\t\tthis_list.find(\".page4_list_info\").text(data.info);\n\n\t\tbody.append(this_list);\n\t},\n\t//缓存数据\n\tcacheData(data){\n\t\tlet url = data.url,\n\t\t\tdir = data.dir;\n\n\t\tDATA.booksDir[url] = dir;\n\t},\n\t//列表事件绑定\n\tbindListEvent(){\n\t\tlet body = $(\"#page4_body\"),\n\t\t\tlist = body.find(\".page4_list\"),\n\t\t\t_this = this;\n\n\t\t$$(list).myclickok(function(){\n\t\t\tlet url = $(this).data(\"url\"),\n\t\t\t\tname = $(this).find(\".page4_list_name\").text();\n\n\t\t\tPAGE2.init(url,name,\"page4\");\n\n\t\t})\n\t}\n};"]}