{"version":3,"sources":["page3.es6"],"names":[],"mappings":"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","file":"page3.js","sourcesContent":["var PAGE3 = {\n\tfrom:\"\",\n\tbookUrl:\"\",\n\tinfoUrl:\"\",\n\tn:\"\",\n\tasync init(bookUrl,infoUrl,infoName,from,n){\n\t\tthis.from = from;\n\t\tthis.bookUrl = bookUrl;\n\t\tthis.infoUrl = infoUrl;\n\t\tthis.n = n;\n\n\t\tlet setting = await this.getLocalSetting();\n\t\tawait this.useLocalSetting(setting);\n\t\tawait this.refreshPage3();\n\t\tlet data = await this.getData(bookUrl,infoUrl);\n\t\tawait this.bindData(infoName,data);\n\t\tawait this.scrollTop();\n\t\tawait this.saveTempInfo(infoName,data);\n\t\tawait this.bindEvent();\n\t\tawait this.show();\n\n\t\t// console.log(data);\n\t},\n\t//异常关闭后进入 入口\n\tasync init1(bookUrl,infoUrl,infoName,from,n,data,scrollTop){\n\t\tthis.from = from;\n\t\tthis.bookUrl = bookUrl;\n\t\tthis.infoUrl = infoUrl;\n\t\tthis.n = n;\n\n\t\tlet setting = await this.getLocalSetting();\n\t\tawait this.useLocalSetting(setting);\n\t\tawait this.refreshPage3();\n\t\tawait this.bindData(infoName,data);\n\t\tawait this.scrollTop(scrollTop);\n\t\tawait this.bindEvent();\n\t\tawait this.show();\n\t},\n\tasync loadNextPage(){\n\t\tlet info = await this.getNextInfoUrl();\n\t\tlet data = await this.getData(this.bookUrl,info.url);\n\n\t\tthis.infoUrl = info.url;\n\t\tthis.n++;\n\n\t\tawait this.bindData(info.name,data);\n\t\tawait this.scrollTop();\n\t\tawait this.saveTempInfo(info.name,data);\n\t},\n\tgetNextInfoUrl(){\n\t\tvar _this = this;\n\t\treturn new Promise(function(success,error){\n\t\t\tlet dir = DATA.booksDir[_this.bookUrl],\n\t\t\t\tn = _this.n+1;\n\n\t\t\tif(n>=dir.length){\n\t\t\t\terror(\"已是最后一章\");\n\t\t\t}else{\n\t\t\t\tsuccess(dir[n]);\n\t\t\t}\n\t\t})\n\t},\n\tgetLocalSetting(){\n\t\treturn new Promise(function(success,error){\n\t\t\tlet setting = DEVICE.localData.getItem(\"setting\") || \"{}\";\n\t\t\tsetting = JSON.parse(setting);\n\t\t\tsuccess(setting);\n\t\t})\n\t},\n\tuseLocalSetting(setting){\n\t\tlet bg = setting.bg || \"rgb(145, 175, 132)\",\n\t\t\tfont_size = setting.font || \"20\";\n\n\t\t$(\"#page3_body\").css({\n\t\t\tbackground:bg,\n\t\t\t\"font-size\":font_size+\"px\"\n\t\t})\n\t},\n\tasync setLocalSetting(color,fontSize){\n\t\tlet oldSetting = await this.getLocalSetting();\n\t\tif(color){\n\t\t\toldSetting.bg = color;\n\t\t}\n\t\tif(fontSize){\n\t\t\toldSetting.font = fontSize;\n\t\t}\n\t\tDEVICE.localData.setItem(\"setting\",JSON.stringify(oldSetting));\n\n\t\tawait this.useLocalSetting(oldSetting);\n\t},\n\tgetData(bookUrl,infoUrl){\n\t\tlet url = bookUrl + infoUrl.split(\"\\/\")[2];\n\n\t\treturn new Promise(function(success,error){\n\t\t\tAJAX.go(\"./api/info\",{url:url},function(rs){\n\t\t\t\tif(rs.data){\n\t\t\t\t\tsuccess(rs.data);\n\t\t\t\t}else{\n\t\t\t\t\terror(\"获取数据失败\");\n\t\t\t\t}\n\t\t\t},function(){\n\t\t\t\terror(\"获取数据失败\");\n\t\t\t})\n\t\t})\n\t},\n\tshow(){\n\t\tlet dom = $(\"#page3\"),\n\t\t\twin_width = window.innerWidth,\n\t\t\t_this = this;\n\n\t\treturn new Promise(function(success,error){\n\t\t\tdom.css3({\n\t\t\t\ttransform:\"translateX(\"+win_width+\"px)\",\n\t\t\t\tdisplay:\"box\"\n\t\t\t});\n\n\t\t\tdom.cssAnimate({\n\t\t\t\ttransform:\"translateX(0)\"\n\t\t\t},500,function(){\n\t\t\t\t$(\"#\"+_this.from).css({display:\"none\"});\n\t\t\t\tsuccess();\n\t\t\t})\n\t\t});\n\t},\n\thide(){\n\t\tlet dom = $(\"#page3\"),\n\t\t\twin_width = window.innerWidth,\n\t\t\t_this = this;\n\n\t\treturn new Promise(function(success,error){\n\t\t\t$(\"#\"+_this.from).css3({display:\"box\"});\n\t\t\tdom.cssAnimate({\n\t\t\t\ttransform:\"translateX(\"+win_width+\"px)\"\n\t\t\t},500,function(){\n\t\t\t\tdom.css({display:\"none\"});\n\t\t\t\tsuccess();\n\t\t\t})\n\t\t});\n\t},\n\trefreshPage3(){\n\t\tlet back = $(\"#page3_back\"),\n\t\t\tbody = $(\"#page3_body\"),\n\t\t\tvoice = $(\"#page3_voice\"),\n\t\t\tfont = $(\"#page3_font\"),\n\t\t\tbg = $(\"#page3_bg\"),\n\t\t\tnext = $(\"#page3_next\"),\n\t\t\ttext_body = $(\"#page3_text_body\"),\n\t\t\tbg_body = $(\"#page3_bg_body\"),\n\t\t\ttext_add = text_body.find(\".page3_texts_add\"),\n\t\t\ttext_less = text_body.find(\".page3_texts_-\"),\n\t\t\tbg_btns = bg_body.find(\".page3_bg_list\");\n\n\t\t$$(back).unbind(true);\n\t\t$$(voice).unbind(true);\n\t\t$$(font).unbind(true);\n\t\t$$(bg).unbind(true);\n\t\t$$(next).unbind(true);\n\t\t$$(body).unbind(true);\n\t\t$$(text_add).unbind(true);\n\t\t$$(text_less).unbind(true);\n\t\t$$(bg_btns).unbind(true);\n\t\tbody.html(\"\");\n\n\t\tthis.bottomBtn.allHide();\n\n\t},\n\tbindData(title,text){\n\t\tvar _this = this;\n\t\treturn new Promise(function(success,error){\n\t\t\t$(\"#page3_title\").text(title);\n\t\t\ttext = text.replace(/\\u3000*/ig,\"\");\n\t\t\ttext = text.replace(/[a-z]+\\(\\)\\;?/,\"\");\n\t\t\ttext = text.replace(/\\s+/ig,\"<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\");\n\t\t\ttext = \"<br/><br/><div style='text-align: center; font-weight: bold;'>\"+title+\"</div>\" + text;\n\t\t\t$(\"#page3_body\").html(\"\");\n\n\t\t\tsetTimeout(function(){\n\t\t\t\t$(\"#page3_body\").html(text);\n\t\t\t\t_this.saveHasRead();\n\t\t\t\tsuccess();\n\t\t\t},100);\n\t\t})\n\t},\n\tbindEvent(){\n\t\tlet back = $(\"#page3_back\"),\n\t\t\tvoice = $(\"#page3_voice\"),\n\t\t\tfont = $(\"#page3_font\"),\n\t\t\tbg = $(\"#page3_bg\"),\n\t\t\tbody = $(\"#page3_body\"),\n\t\t\tnext = $(\"#page3_next\"),\n\t\t\ttext_body = $(\"#page3_text_body\"),\n\t\t\tbg_body = $(\"#page3_bg_body\"),\n\t\t\ttext_add = text_body.find(\".page3_texts_add\"),\n\t\t\ttext_less = text_body.find(\".page3_texts_-\"),\n\t\t\tbg_btns = bg_body.find(\".page3_bg_list\"),\n\t\t\t_this = this;\n\n\t\t$$(body).myclickdown(function(){\n\t\t\t_this.bottomBtn.allHide();\n\t\t});\n\n\t\t$$(back).myclickok(function(){\n\t\t\t_this.clearTempInfo();\n\t\t\t_this.bottomBtn.allHide();\n\t\t\t_this.hide();\n\t\t});\n\n\t\t$$(voice).myclickok(function(){\n\t\t\t_this.bottomBtn.allHide();\n\t\t\tlet _text = $(\"#page3_body\").text();\n\t\t\tDEVICE.speak(_text);\n\t\t});\n\n\t\t$$(font).myclickok(function(){\n\t\t\t_this.bottomBtn.click(\"page3_text_body\");\n\t\t});\n\n\t\t$$(bg).myclickok(function(){\n\t\t\t_this.bottomBtn.click(\"page3_bg_body\");\n\t\t});\n\n\t\t$$(next).myclickok(function(){\n\t\t\t_this.bottomBtn.allHide();\n\t\t\t_this.loadNextPage().catch(function(e){\n\t\t\t\tDEVICE.info.show(e);\n\t\t\t});\n\t\t});\n\n\t\t$$(text_add).myclickok(function(){\n\t\t\tvar now_text_dom = $(this).parent().find(\".page3_texts_text\"),\n\t\t\t\tnow_text = parseInt(now_text_dom.text());\n\t\t\tnow_text++;\n\t\t\tnow_text = (now_text>30)? 30 : now_text;\n\t\t\tnow_text_dom.text(now_text);\n\t\t\t_this.setLocalSetting(\"\",now_text);\n\t\t});\n\t\t$$(text_less).myclickok(function(){\n\t\t\tvar now_text_dom = $(this).parent().find(\".page3_texts_text\"),\n\t\t\t\tnow_text = parseInt(now_text_dom.text());\n\t\t\tnow_text--;\n\t\t\tnow_text = (now_text<12)? 12 : now_text;\n\t\t\tnow_text_dom.text(now_text);\n\t\t\t_this.setLocalSetting(\"\",now_text);\n\t\t});\n\t\t$$(bg_btns).myclickok(function(){\n\t\t\tvar color = $(this).css(\"background-color\");\n\t\t\t_this.setLocalSetting(color,\"\");\n\t\t});\n\n\n\t},\n\tbottomBtn:{\n\t\tisShow:{\n\t\t\tpage3_text_body:false,\n\t\t\tpage3_bg_body:false\n\t\t},\n\t\thide(id){\n\t\t\tvar _this = this;\n\t\t\treturn new Promise(function(success,error){\n\t\t\t\tlet dom = $(\"#\"+id);\n\t\t\t\tdom.cssAnimate({\n\t\t\t\t\ttransform:\"translateY(0)\"\n\t\t\t\t},300,function(){\n\t\t\t\t\tdom.css({\n\t\t\t\t\t\tdisplay:\"none\"\n\t\t\t\t\t});\n\t\t\t\t\t_this.isShow[id] = false;\n\t\t\t\t\tsuccess();\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tshow(id){\n\t\t\tvar _this = this;\n\t\t\treturn new Promise(function(success,error){\n\t\t\t\tlet dom = $(\"#\"+id);\n\t\t\t\tdom.css3({\n\t\t\t\t\tdisplay:\"box\",\n\t\t\t\t\ttransform:\"translateY(0)\"\n\t\t\t\t});\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tdom.cssAnimate({\n\t\t\t\t\t\ttransform:\"translateY(-50px)\"\n\t\t\t\t\t},300,function(){\n\t\t\t\t\t\t_this.isShow[id] = true;\n\t\t\t\t\t\tsuccess();\n\t\t\t\t\t})\n\t\t\t\t},100)\n\t\t\t})\n\t\t},\n\t\tasync click(id){\n\t\t\tlet clickId,otherId;\n\t\t\tclickId = (id == \"page3_text_body\")? \"page3_text_body\" : \"page3_bg_body\";\n\t\t\totherId = (clickId == \"page3_text_body\")? \"page3_bg_body\" : \"page3_text_body\";\n\n\n\t\t\tif(this.isShow[clickId]){\n\t\t\t\tawait this.hide(clickId);\n\t\t\t}else{\n\t\t\t\tif(this.isShow[otherId]){\n\t\t\t\t\tawait this.hide(otherId);\n\t\t\t\t}\n\t\t\t\tawait this.show(clickId);\n\t\t\t}\n\t\t},\n\t\tallHide(){\n\t\t\tlet doms = this.isShow;\n\t\t\tfor(var key in doms){\n\t\t\t\tif(doms.hasOwnProperty(key)){\n\t\t\t\t\tif(doms[key]){\n\t\t\t\t\t\tthis.hide(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tsaveHasRead(){\n\t\tlet data = JSON.parse(DEVICE.localData.getItem(\"cache\") || '{}'),\n\t\t\thasRead = data.hasRead || {};\n\n\t\thasRead[this.bookUrl] = this.infoUrl;\n\t\tdata.hasRead = hasRead;\n\n\t\tDEVICE.localData.setItem(\"cache\",JSON.stringify(data));\n\n\t\tDATA.hasRead = hasRead;\n\n\t\tPAGE2.listShowHasRead(this.n);\n\n\t\t//更新page1的未读数量\n\t\tlet total = DATA.booksDir[this.bookUrl].length,\n\t\t\tnumber = total - 1 - this.n;\n\t\tPAGE1.refreshNotReadNumber(this.bookUrl,number);\n\t},\n\tscrollTop(top){\n\t\ttop = top || 0;\n\t\t$(\"#page3_body\").animate({scrollTop:top+\"px\"},10);\n\t},\n\tsaveTempInfo(title,text){\n\t\tlet bookUrl = this.bookUrl,\n\t\t\tinfoUrl = this.infoUrl;\n\n\t\tDEVICE.localData.setItem(\"temp\",JSON.stringify({\n\t\t\ttitle:title,\n\t\t\ttext:text,\n\t\t\tbookUrl:bookUrl,\n\t\t\tinfoUrl:infoUrl,\n\t\t\tn:this.n\n\t\t}));\n\t},\n\tclearTempInfo(){\n\t\tDEVICE.localData.setItem(\"temp\",\"\");\n\t}\n};"]}